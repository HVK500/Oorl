"use strict";(function(n){function t(n,i){return this instanceof t==!1?new t(n,i):(this.Name=n,this.Count=i,this.getJson=function(){return{metricType:r.Count,name:this.Name,value:this.Count}},this)}function i(n,r,u){if(this instanceof i==!1)return new i(n,r,u);var f={},e={};return e.getPayload=function(){var n=[];return f.Buffer.forEach(function(t){n.push(t.getJson())}),f.Buffer=[],n},e.startPumpTimeout=function(){f.FlushTimeout===null&&(f.FlushTimeout=setTimeout(f.FlushFn,f.FlushIntervalSec*1e3))},e.post=function(n,t,i,r){var u=new XMLHttpRequest;u.open("POST",n);u.setRequestHeader("Content-Type","application/json;charset=UTF-8");u.send(JSON.stringify(t));u.onreadystatechange=function(){this.readyState===4&&(this.status===200?typeof i=="function"&&i(this):typeof r=="function"&&r(this))}},f.ServerEndpoint=n,f.MetricNamespace=r,f.FlushIntervalSec=u,f.FlushTimeout=null,f.Buffer=[],f.FlushFn=function(){if(f.FlushTimeout=null,f.Buffer.length>0){var n=f.ServerEndpoint+"API/Publish/Metrics",t={Metrics:e.getPayload()};e.post(n,t,e.startPumpTimeout,e.startPumpTimeout)}else e.startPumpTimeout()},f.LogCount=function(n,i){var r=new t(this.MetricNamespace+"."+n,i);f.Buffer.push(r)},f.FlushTimeout=setTimeout(f.FlushFn,f.FlushIntervalSec*1e3),f}var r={Unknown:0,Count:1};n.Html5Core=n.Html5Core||{};n.Html5Core.Metrics=n.Html5Core.Metrics||{};n.Html5Core.Metrics.Client=i;n.Html5Core.Metrics.CountMetric=t})(window);